<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Toys::Middleware
  
    &mdash; Toys
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Toys::Middleware";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span>
     &raquo; 
    <span class="title">Middleware</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Toys::Middleware
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="Middleware/Base.html" title="Toys::Middleware::Base (class)">Base</a></span>, <span class='object_link'><a href="StandardMiddleware/AddVerbosityFlags.html" title="Toys::StandardMiddleware::AddVerbosityFlags (class)">StandardMiddleware::AddVerbosityFlags</a></span>, <span class='object_link'><a href="StandardMiddleware/HandleUsageErrors.html" title="Toys::StandardMiddleware::HandleUsageErrors (class)">StandardMiddleware::HandleUsageErrors</a></span>, <span class='object_link'><a href="StandardMiddleware/SetDefaultDescriptions.html" title="Toys::StandardMiddleware::SetDefaultDescriptions (class)">StandardMiddleware::SetDefaultDescriptions</a></span>, <span class='object_link'><a href="StandardMiddleware/ShowHelp.html" title="Toys::StandardMiddleware::ShowHelp (class)">StandardMiddleware::ShowHelp</a></span>, <span class='object_link'><a href="StandardMiddleware/ShowRootVersion.html" title="Toys::StandardMiddleware::ShowRootVersion (class)">StandardMiddleware::ShowRootVersion</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/toys/middleware.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>A middleware is an object that has the opportunity to alter the
configuration and runtime behavior of each tool in a Toys CLI. A CLI
contains an ordered list of middleware, known as the <em>middleware stack</em>,
that together define the CLI&#39;s default behavior.</p>

<p>Specifically, a middleware can perform two functions.</p>

<p>First, it can modify the configuration of a tool. After tools are defined
from configuration, the middleware stack can make modifications to each
tool. A middleware can add flags and arguments to the tool, modify the
description, or make any other changes to how the tool is set up.</p>

<p>Second, a middleware can intercept and change tool execution. Like a Rack
middleware, a Toys middleware can wrap execution with its own code,
replace it outright, or leave it unmodified.</p>

<p>Generally, a middleware is a class that implements the two methods defined
in this module: <span class='object_link'><a href="#config-instance_method" title="Toys::Middleware#config (method)">#config</a></span> and <span class='object_link'><a href="#run-instance_method" title="Toys::Middleware#run (method)">#run</a></span>. To
get default implementations that do nothing, a middleware can
<code>include Toys::Middleware</code> or subclass <span class='object_link'><a href="Middleware/Base.html" title="Toys::Middleware::Base (class)">Base</a></span>, but this
is not required.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Middleware/Base.html" title="Toys::Middleware::Base (class)">Base</a></span>, <span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Spec</a></span>
    
  
</p>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#resolve_specs-class_method" title="resolve_specs (class method)">.<strong>resolve_specs</strong>(*items)  &#x21d2; Array&lt;Toys::Middleware::Spec&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Resolve all arguments into an array of middleware specs.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#spec-class_method" title="spec (class method)">.<strong>spec</strong>(middleware, *args, **kwargs, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a middleware spec.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#spec_from_array-class_method" title="spec_from_array (class method)">.<strong>spec_from_array</strong>(array)  &#x21d2; Toys::Middleware::Spec </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a middleware spec from an array specification.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-instance_method" title="#config (instance method)">#<strong>config</strong>(tool, loader)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>This method is called after a tool has been defined, and gives this middleware the opportunity to modify the tool definition.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">#<strong>run</strong>(context)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>This method is called when the tool is run.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="resolve_specs-class_method">
  
    .<strong>resolve_specs</strong>(*items)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Toys::Middleware::Spec</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Resolve all arguments into an array of middleware specs. Each argument
may be one of the following:</p>

<ul>
<li> A <span class='object_link'><a href="" title="Toys::Middleware (module)">Toys::Middleware</a></span> object</li>
<li> A <span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Spec</a></span></li>
<li> An array whose first element is a middleware name or class, and the
subsequent elements are params that define what to pass to the class
constructor (see <span class='object_link'><a href="#spec_from_array-class_method" title="Toys::Middleware.spec_from_array (method)">spec_from_array</a></span>)</li>
</ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>items</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="Toys::Middleware (module)">Toys::Middleware</a></span>,<span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Toys::Middleware::Spec</a></span>,Array&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Toys::Middleware::Spec</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173
174
175
176
177
178
179
180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/middleware.rb', line 171</span>

<span class='kw'>def</span> <span class='id identifier rubyid_resolve_specs'>resolve_specs</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_item'>item</span>
    <span class='kw'>when</span> <span class='op'>::</span><span class='const'>Array</span>
      <span class='id identifier rubyid_spec_from_array'>spec_from_array</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Spec</a></span></span>
      <span class='id identifier rubyid_item'>item</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_spec'>spec</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="spec-class_method">
  
    
      <span class="overload">.<strong>spec</strong>(middleware_object)  &#x21d2; <tt><span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Toys::Middleware::Spec</a></span></tt> </span>
    
      <span class="overload">.<strong>spec</strong>(name, *args, **kwargs, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Toys::Middleware::Spec</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a middleware spec.</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">.<strong>spec</strong>(middleware_object)  &#x21d2; <tt><span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Toys::Middleware::Spec</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Create a spec wrapping an existing middleware object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>middleware_object</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Toys::Middleware (module)">Toys::Middleware</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The middleware object</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Toys::Middleware::Spec</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A spec</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">.<strong>spec</strong>(name, *args, **kwargs, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Toys::Middleware::Spec</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Create a spec indicating a given middleware name should be
instantiated with the given arguments.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>Class</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The middleware name or class</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The arguments to pass to the constructor</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kwargs</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The keyword arguments to pass to the constructor</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The block to pass to the constructor</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Toys::Middleware::Spec</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A spec</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116
117
118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/middleware.rb', line 114</span>

<span class='kw'>def</span> <span class='id identifier rubyid_spec'>spec</span><span class='lparen'>(</span><span class='id identifier rubyid_middleware'>middleware</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_middleware'>middleware</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_middleware'>middleware</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Symbol</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_middleware'>middleware</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Class</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Spec</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_middleware'>middleware</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='id identifier rubyid_kwargs'>kwargs</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Spec</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_middleware'>middleware</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="spec_from_array-class_method">
  
    .<strong>spec_from_array</strong>(array)  &#x21d2; <tt><span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Toys::Middleware::Spec</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a middleware spec from an array specification.</p>

<p>The array must be 1-4 elements long. The first element must be the
middleware name or class. The other three arguments may include any or
all of the following optional elements, in any order:</p>

<ul>
<li> An array for the positional arguments to pass to the constructor</li>
<li> A hash for the keyword arguments to pass to the constructor</li>
<li> A proc for the block to pass to the constructor</li>
</ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>array</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The array input</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Toys::Middleware::Spec</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A spec</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/middleware.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_spec_from_array'>spec_from_array</span><span class='lparen'>(</span><span class='id identifier rubyid_array'>array</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_middleware'>middleware</span> <span class='op'>=</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_middleware'>middleware</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_middleware'>middleware</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Symbol</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_middleware'>middleware</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Class</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='op'>::</span><span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bad middleware name: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_middleware'>middleware</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_kwargs'>kwargs</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_block'>block</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_slice'>slice</span><span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_param'>param</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_param'>param</span>
    <span class='kw'>when</span> <span class='op'>::</span><span class='const'>Array</span>
      <span class='id identifier rubyid_args'>args</span> <span class='op'>+=</span> <span class='id identifier rubyid_param'>param</span>
    <span class='kw'>when</span> <span class='op'>::</span><span class='const'>Hash</span>
      <span class='id identifier rubyid_kwargs'>kwargs</span> <span class='op'>=</span> <span class='id identifier rubyid_kwargs'>kwargs</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_param'>param</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='op'>::</span><span class='const'>Proc</span>
      <span class='id identifier rubyid_block'>block</span> <span class='op'>=</span> <span class='id identifier rubyid_param'>param</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='op'>::</span><span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bad param: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_param'>param</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='const'><span class='object_link'><a href="Middleware/Spec.html" title="Toys::Middleware::Spec (class)">Spec</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_middleware'>middleware</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='id identifier rubyid_kwargs'>kwargs</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="config-instance_method">
  
    #<strong>config</strong>(tool, loader)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>This method is called after a tool has been defined, and gives this
middleware the opportunity to modify the tool definition. It is passed
the tool definition object and the loader, and can make any changes to
the tool definition. In most cases, this method should also call
<code>yield</code>, which passes control to the next middleware in the stack. A
middleware can disable modifications done by subsequent middleware by
omitting the <code>yield</code> call, but this is uncommon.</p>

<p>This basic implementation does nothing and simply yields to the next
middleware.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>tool</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Tool.html" title="Toys::Tool (class)">Toys::Tool</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The tool definition to modify.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>loader</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Loader.html" title="Toys::Loader (class)">Toys::Loader</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The loader that loaded this tool.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/middleware.rb', line 65</span>

<span class='kw'>def</span> <span class='id identifier rubyid_config'>config</span><span class='lparen'>(</span><span class='id identifier rubyid_tool'>tool</span><span class='comma'>,</span> <span class='id identifier rubyid_loader'>loader</span><span class='rparen'>)</span> <span class='comment'># rubocop:disable Lint/UnusedMethodArgument
</span>  <span class='kw'>yield</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run-instance_method">
  
    #<strong>run</strong>(context)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>This method is called when the tool is run. It gives the middleware an
opportunity to modify the runtime behavior of the tool. It is passed
the tool instance (i.e. the object that hosts a tool&#39;s <code>run</code> method),
and you can use this object to access the tool&#39;s options and other
context data. In most cases, this method should also call <code>yield</code>,
which passes control to the next middleware in the stack. A middleware
can &quot;wrap&quot; normal execution by calling <code>yield</code> somewhere in its
implementation of this method, or it can completely replace the
execution behavior by not calling <code>yield</code> at all.</p>

<p>Like a tool&#39;s <code>run</code> method, this method&#39;s return value is unused. If
you want to output from a tool, write to stdout or stderr. If you want
to set the exit status code, call <span class='object_link'><a href="Context.html#exit-instance_method" title="Toys::Context#exit (method)">Context#exit</a></span> on the context.</p>

<p>This basic implementation does nothing and simply yields to the next
middleware.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Toys::Context (class)">Toys::Context</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The tool execution context.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/middleware.rb', line 90</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='comment'># rubocop:disable Lint/UnusedMethodArgument
</span>  <span class='kw'>yield</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Jan  5 18:47:09 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.22 (ruby-2.7.0).
</div>

    </div>
  </body>
</html>